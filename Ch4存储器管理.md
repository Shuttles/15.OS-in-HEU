# 0.概述

1. 重点
   + 理解***<u>重定位</u>***的基本概念
   + 掌握***<u>动态分区分配方式</u>***
   + 掌握理解***<u>分页和分段存储管理</u>***方式
   + 理解***<u>虚拟存储器</u>***的基本概念
   + 掌握***<u>请求分页系统</u>***的基本原理
2. 难点
   + 动态分区分配算法
   + 分页和分段地址转换
   + 请求分页系统的地址转换及页面置换算法
3. 知识点
   + 重定位的基本概念
   + 动态分区分配方式及分配算法、分区保护
   + 分页存储管理及地址转换、分段存储管理及地址变换，信息共享和保护
   + 虚拟存储器的基本概念、特征，页面置换技术
   + 请求分页系统，页表机制、地址变换及页面置换算法







1. 存储器是计算机系统的重要组成部分
2. 虽然存储器的容量不断扩大，但仍不能满足要求，因此***<u>存储器管理</u>***是操作系统的重要工作
3. 存储器包括内存和外存
   + 存储器的功能是保存数据，存储器的发展方向是高速、大容量和小体积。
   + 内存在访问速度方面的发展：DRAM、SDRAM、SRAM等
   + 硬盘技术在大容量方面的发展：接口标准、存储密度等。
4. 主存储器管理技术分为两大类
   + ***<u>实存储器管理</u>***
   + ***<u>虚拟存储器管理</u>***
5. 存储器的物理组织、多级存储器
   + 存储组织是指在存储技术和CPU寻址技术许可的范围内组织合理的存储结构。
     + 其依据是访问速度匹配关系、容量要求和价格
     + “寄存器-内存-外存”结构
     + “寄存器-缓存-内存-外存”结构
   + 微机中的存储层次组织
     + 访问速度越慢，容量越大，价格越便宜
     + 最佳状态应是各层次的存储器都处于均衡的繁忙状态(==如：缓存命中率正好使主存读写保持繁忙==)

# 1.程序的装入与链接

1. 多道程序环境下，程序要运行必须为之创建进程，而创建进程的第一件事就是分配内存
2. 源程序(.c)要运行通常进过==编译==(compile)-->==链接==(link)-->==装入==(load)几个步骤



## 1.1程序的装入

### 1.1.1绝对装入方式(Absolute)

1. 事先确定了程序将驻留在内存的什么位置，即在内存中的绝对地址





### 1.1.2可重定位装入方式



### 1.1.3动态运行时装入方式



## 1.2程序的链接

### 1.4静态链接方式





# 2.连续分配方式

## 2.1单一连续分配

早期OS使用，现在基本不使用

1. 连续分配方式为***<u>一个</u>***用户程序分配一个连续的内存空间
2. 单一连续分配是最简单的一种存储管理方式，但只能用于单用户、单任务的os中。

![img](https://wx1.sinaimg.cn/mw690/005LasY6gy1ge8fvkm0baj30tw0k275j.jpg)

## 2.2固定分区分配

1. ***<u>最简单的</u>***可运行多道程序的存储管理方式

2. 内存用户空间划分为若干个***<u>固定大小的区域</u>***

   每个分区中只装入***<u>一道</u>***作业

3. 划分分区的方法

   + ***<u>分区大小相等</u>***

     使所有的内存分区大小相等

     + 太大：浪费
     + 太小：不够用

   + ***<u>分区大小不等</u>***

     划分为多个大、中、小搭配的分区

     + 根据程序大小决定所使用的的分区

       大班在大教室、小班在小教室

![img](https://wx2.sinaimg.cn/mw690/005LasY6gy1ge8fyameqoj30rn0kfadb.jpg)

## 2.3动态分区分配

1. 根据进程的实际需要，动态地为之分配内存。

2. 分配数据结构

   + ***<u>空闲分区表</u>***

     记录每个空闲分区的情况

   + ***<u>空闲分区链</u>***

     实现对空闲分区的分配和链接

   ![img](https://wx1.sinaimg.cn/mw690/005LasY6gy1ge8g184vktj30gx0fsmxa.jpg)

3. ==四种算法！==

## 2.4伙伴系统

1. Linux采用伙伴(buddy)

==比较操蛋==

## 2.5哈希算法

![img](https://wx2.sinaimg.cn/mw690/005LasY6gy1ge8g9eaiftj30ry0b6gmu.jpg)



## 2.6可重定位分区分配

==区别于之前的连续分配！！！==

![img](https://wx2.sinaimg.cn/mw690/005LasY6gy1ge8gitd221j30ty0kp0uz.jpg)



## 2.7对换(Swapping)

![img](https://wx3.sinaimg.cn/mw690/005LasY6gy1ge8glb2p1zj30qj0jggop.jpg)

![img](https://wx1.sinaimg.cn/mw690/005LasY6gy1ge8glf6x3hj30p60idjuu.jpg)

![img](https://wx4.sinaimg.cn/mw690/005LasY6gy1ge8glivd0bj30pa0kktc5.jpg)









# 3.基本分页存储管理

为何要有分页存储管理和分段存储管理？

![img](https://wx2.sinaimg.cn/mw690/005LasY6gy1ge8goc7zrcj30pk0j70vw.jpg)

## 3.1页面与页表

1. 页面
2. 地址结构

## 3.2地址变换机构



## 3.3两级和多级页表





# 4.基本分段存储管理



# 5.虚拟存储器的基本概念

## 5.1交换与覆盖

1. 是在多道环境下扩充内存的方法，用以解决在较小的存储空间中运行较大程序时遇到的矛盾
2. 覆盖技术主要用在早期的OS中
3. 交换技术的发展导致了虚存技术



## 5.2虚拟存储器的引入

### 5.2.1定义

1. 是指具有***<u>请求调入功能和置换功能</u>***，能从逻辑上对==内存容量加以扩充的一种存储器系统==。其逻辑容量由***<u>内存容量和外存容量之和</u>***所决定，其运行速度接近于内存速度，而其成本却又接近于外存。



## 5.3虚拟存储器的实现方法



1. 请求分页系统
2. 请求分段系统



## 5.4虚拟存储器的特征

1. 多次性

   一个作业被分成多次调入内存

2. 对换性

3. 虚拟性

4. 用CPU时间和

# 6.请求分页存储管理方式

## 6.1请求分页中的硬件支持





## 6.2



## 6.3







# 7.页面置换算法



# 8.请求分段存储管理方式

# 

# 